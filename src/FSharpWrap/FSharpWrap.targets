<Project>

  <!-- FSharpWrap Settings -->
  <PropertyGroup>
    <FSharpWrapOutputFileName Condition="'$(FSharpWrapOutputFileName)'==''">output.autogen.fs</FSharpWrapOutputFileName>
    <FSharpWrapOutputFilePath Condition="'$(FSharpWrapOutputFilePath)'==''">$(MSBuildProjectDirectory)/$(FSharpWrapOutputFileName)</FSharpWrapOutputFilePath>
    <FSharpWrapToolPath Condition="'$(FSharpWrapToolPath)'==''">$(MSBuildThisFileDirectory)/FSharpWrap.Tool.dll</FSharpWrapToolPath>
  </PropertyGroup>

  <Target Name="FSharpWrap" BeforeTargets="Compile">
    <!-- TODO: How to check that 'dotnet' exists? -->
    <Exec
      Command="dotnet exec &quot;$(FSharpWrapToolPath)&quot; --assembly-paths @(Reference, ' ') --output-file &quot;$(FSharpWrapOutputFilePath)&quot;"
      ConsoleToMsBuild="true"
      LogStandardErrorAsError="true" />
  </Target>

</Project>
